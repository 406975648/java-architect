## Redis数据类型之Set(无序集合)

### Set(无序集合)常用命令

#### 创建集合

* sadd key v1 v2 v3  添加无序的不重复的元素

> **sadd key v1 v2 v3 ...**

```
127.0.0.1:6379> sadd set01 1 2 2 3 3 3
(integer) 3
127.0.0.1:6379> smembers set01
1) "1"
2) "2"
3) "3"
```

#### 查看集合中的所有元素

> **smembers key**

```
127.0.0.1:6379> smembers set01
1) "1"
2) "2"
3) "3"
```

#### 判断元素是否存在

* 存在元素返回1
* 不存在元素返回0

> **sismember**

```
127.0.0.1:6379> smembers set01
1) "1"
2) "2"
3) "3"
127.0.0.1:6379> sismember set01 1
(integer) 1
127.0.0.1:6379> sismember set01 4
(integer) 0
```

#### 获取集合元素个数

> **scard key 获取元素个数**

```
127.0.0.1:6379> smembers set01
1) "1"
2) "2"
3) "3"
127.0.0.1:6379> scard set01
(integer) 3
```

#### 删除元素

> **srem key value删除某个元素**

```
127.0.0.1:6379> smembers set01
1) "1"
2) "2"
3) "3"
127.0.0.1:6379> srem set01 4
(integer) 0
127.0.0.1:6379> srem set01 1
(integer) 1
127.0.0.1:6379> smembers set01
1) "2"
2) "3"
```

#### 随机弹出元素

* 随机弹出元素,不会删除set集合中的元素
* 随机弹出n个元素
* 应用:随机抽取中奖用户

> **srandmember key 随机弹出元素**

```
127.0.0.1:6379> smembers set01
1) "2"
2) "3"
127.0.0.1:6379> sadd set01 4 5 6 7 8 x j z e
(integer) 9
127.0.0.1:6379> smembers set01
 1) "8"
 2) "x"
 3) "7"
 4) "6"
 5) "j"
 6) "e"
 7) "2"
 8) "3"
 9) "4"
10) "5"
11) "z"
127.0.0.1:6379> srandmember set01
"7"
127.0.0.1:6379> srandmember set01
"j"
127.0.0.1:6379> srandmember set01 3
1) "8"
2) "2"
3) "5" 
127.0.0.1:6379> smembers set01
 1) "7"
 2) "6"
 3) "8"
 4) "x"
 5) "j"
 6) "e"
 7) "2"
 8) "3"
 9) "4"
10) "5"
11) "z"
```

#### 随机出栈

> **spop key 随机出栈**

```
127.0.0.1:6379> smembers set01
 1) "7"
 2) "6"
 3) "8"
 4) "x"
 5) "j"
 6) "e"
 7) "2"
 8) "3"
 9) "4"
10) "5"
11) "z"
127.0.0.1:6379> spop set01
"7"
127.0.0.1:6379> smembers set01
 1) "6"
 2) "8"
 3) "x"
 4) "j"
 5) "e"
 6) "2"
 7) "3"
 8) "4"
 9) "5"
10) "z"
127.0.0.1:6379> spop set01
"e"
127.0.0.1:6379> smembers set01
1) "6"
2) "8"
3) "x"
4) "j"
5) "2"
6) "3"
7) "4"
8) "5"
9) "z"
127.0.0.1:6379>
```

#### Set

#### Set集合运算

```
127.0.0.1:6379> del set01
(integer) 1
127.0.0.1:6379> del set02
(integer) 1
127.0.0.1:6379> sadd set01 1 2  3 4 5 6
(integer) 6
127.0.0.1:6379> sadd set02 3 4 5 6 7 8
(integer) 6
```


> **差集：sdiff**

```
127.0.0.1:6379> sdiff set01 set02
1) "1"
2) "2"
```

> **交集：sinter**

```
127.0.0.1:6379> sinter set01 set02
1) "3"
2) "4"
3) "5"
4) "6"
```

> **并集：sunion**

```
127.0.0.1:6379> sunion set01 set02
1) "1"
2) "2"
3) "3"
4) "4"
5) "5"
6) "6"
7) "7"
8) "8"
```   


#### 

### 性能特点

Set集合中不允许出现重复的元素。Set可包含的最大元素数量是4294967295。可以进行集合的运算:差集、交集、并集。
